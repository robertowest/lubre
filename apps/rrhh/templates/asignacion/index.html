{% extends "rrhh/base.html" %}
{% load static %}

{% comment %}

    Empleado
        puede tener documentación
            la documentación puede tener mantenimiento

        puede tener asignación de activos
            el activo puede tener mantenimiento
            el activo puede tener documentación
                la documentación del activo puede tener mantenimiento

{% endcomment %}

{% block content %}
    <div class="container">
        <table cellpadding="10" cellspacing="10" width="100%">
            <tr>
                <!-- documentos -->
                <td>
                    <div class="shadow-lg p-3 mb-5 bg-white rounded">
                        {% include 'asignacion/ajax/doc_ajax.html' %}
                    </div>
                </td>
                <!-- documento-mantenimiento -->
                <td colspan="2" style="vertical-align: top">
                    <div class="shadow p-3 mb-5 bg-white rounded">
                        {% if Doc %}
                            {% include 'asignacion/ajax/doc_man_ajax.html' %}
                        {% else %}
                            <h5>Mantenimiento del documento</h5>
                        {% endif %}
                    </div>
                </td>
            </tr>
            <tr>
                <!-- activos -->
                <td rowspan="2" style="vertical-align: top">
                    <div class="shadow p-3 mb-5 bg-white rounded">
                        {% include 'asignacion/ajax/act_ajax.html' %}
                    </div>
                </td>
                <!-- activo-mantenimiento -->
                <td colspan="2">
                    <div class="shadow p-3 mb-5 bg-white rounded">
                        {% if Act %}
                            {% include 'asignacion/ajax/act_man_ajax.html' %}
                        {% else %}
                            <h5>Mantenimiento del activo</h5>
                        {% endif %}
                    </div>
                </td>
            </tr>
            <tr>
                <!-- activo-documentos -->
                <td>
                    <div class="shadow p-3 mb-5 bg-white rounded">
                        {% if ActDoc %}
                            {% include 'asignacion/ajax/act_doc_ajax.html' %}
                        {% else %}
                            <h5>Documento del activo</h5>
                        {% endif %}
                    </div>
                </td>
                <!-- activo-documento-mantenimiento -->
                <td style="vertical-align: top">
                    <div class="shadow p-3 mb-5 bg-white rounded">
                        {% if ActDocMan %}
                            {% include 'asignacion/ajax/act_doc_man_ajax.html' %}
                        {% else %}
                            <h5>Mantenimiento del documento del activo</h5>
                        {% endif %}
                    </div>
                </td>
            </tr>
        </table>
    </div>

{% endblock %}

{% block js %}
    <script>
        $(document).ready (function () {
            // comprobamos que cuadro estará visible
            {% if not Doc %}
                $('#doc-man').hide();
            {% endif %}
            {% if not Act %}
                $('#act-man').hide();
                $('#act-doc').hide();
                $('#act-doc-man').hide();
            {% endif %}
        });

        function documento(idref) {
            alert('documento');
        };

        function activo(idref) {
            $.ajax({
                url: '/rrhh/act_man_ajax/',
                data: {
                    id: idref
                },
                success: function(response) {
                    $('#act-man').html(response);
                }
            });

            // documentación del activo
            $.ajax({
                url: '/rrhh/act_doc_ajax/',
                data: {
                    id: idref
                },
                success: function(response) {
                    $('#act-doc').html(response);
                }
            });
        };

        function activo_documento(idref) {
            // documento del mantenimientos del activo

            $.ajax({
                url: '/rrhh/act_doc_man_ajax/',
                data: {
                    id: idref
                },
                success: function(response) {
                    $('#act-doc-man').html(response);
                }
            });
         };

    </script>
{% endblock %}
